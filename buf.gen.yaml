version: v1
managed:
  enabled: true

plugins:
  - plugin: buf.build/community/neoeinstein-prost:v0.3.1
    out: gen
    #opt:
    #  - compile_well_known_types
    #  - extern_path=.google.protobuf=::pbjson_types
    #  - file_descriptor_set
    #  - enable_type_names
  #- plugin: buf.build/community/neoeinstein-prost-serde:v0.2.3
  #  out: gen
  - plugin: buf.build/community/neoeinstein-tonic:v0.2.2
    out: gen
    opt:
      - compile_well_known_types
      - no_transport=true
      - no_server=true
      - extern_path=.google.protobuf=::pbjson_types
      #- no_client=true
  - plugin: prost-crate
    out: .
    strategy: all
    opt:
      - include_file=gen/mod.rs
      - gen_crate
      #- gen_crate=Cargo.toml
#  #- remote: buf.build/grpc-ecosystem/openapiv2:v2.16.2
#  #  out: gen/openapiv2
#  #- remote: buf.build/protocolbuffers/go
#  #  out: gen/go
#  #  opt:
#  #    - paths=source_relative
#  #- remote: buf.build/grpc/go
#  #  out: gen/go
#  #  opt:
#  #    - paths=source_relative
#  #- remote: buf.build/grpc-ecosystem/gateway
#  #  out: gen/go
#  #  opt:
#  #    - paths=source_relative
#  #- remote: buf.build/protocolbuffers/js
#  #  out: web/src/gen/ts
#  #  include_imports: true
#  #  opt:
#  #    - import_style=commonjs,binary
#  #- remote: buf.build/grpc/web
#  #  out: web/src/gen/ts
#  #  include_imports: true
#  #  opt:
#  #    - import_style=commonjs+dts
#  #    - mode=grpcwebtext
#  #- remote: buf.build/bufbuild/es
#  #  out: gen/es
#  #- remote: buf.build/connectrpc/es
#  #  out: gen/es
#inputs:
#  - directory: proto
